CREATE DATABASE QUANLYHOCSINH
use QUANLYHOCSINH
CREATE TABLE HOSOHOCSINH (
	MaHS char(10) PRIMARY KEY NOT NULL,
	HoTen nvarchar(50) NOT NULL,
	Email nvarchar(50),
	GioiTinh bit NOT NULL,
	NgaySinh date NOT NULL,
	DiaChi nvarchar(100) NOT NULL
)

CREATE TABLE LOP (
	IDLop char(10) PRIMARY KEY NOT NULL,
	TenLop nvarchar(20) NOT NULL,
	SiSo int,
	SoLuongDat int,
	TiLe decimal(3,2)
)

CREATE TABLE TONGKETLOP (
	MaHS char(10) PRIMARY KEY NOT NULL,
	IDLop char(10) NOT NULL,
	TBHK1 decimal(3,2),
	TBHK2 decimal(3,2)
	FOREIGN KEY (MaHS) REFERENCES HOSOHOCSINH(MaHS),
	FOREIGN KEY (IDLop) REFERENCES LOP(IDLop)
)

CREATE TABLE MONHOC (
	IDMonHoc char(10) PRIMARY KEY NOT NULL,
	TenMH nvarchar(50) NOT NULL
)

CREATE TABLE BANGDIEMMON (
	IDBangDiemMon char(10) PRIMARY KEY NOT NULL,
	IDLop char(10) NOT NULL,
	IDMonHoc char(10) NOT NULL,
	HocKy tinyint NOT NULL,
	SoLuongDat int,
	TiLe int,
	FOREIGN KEY (IDMonHoc) REFERENCES MONHOC(IDMonHoc),
	FOREIGN KEY (IDLop) REFERENCES LOP(IDLop),
)

CREATE TABLE CTBANGDIEMMON (
	IDCTBangDiemMon char(10) PRIMARY KEY NOT NULL,
	MaHS char(10) NOT NULL,
	Diem15 decimal(3,2),
	Diem1T decimal(3,2),
	DiemTB decimal(3,2),
	IDBangDiemMon char(10),
	FOREIGN KEY (MaHS) REFERENCES HOSOHOCSINH(MaHS),
	FOREIGN KEY (IDBangDiemMon) REFERENCES BANGDIEMMON(IDBangDiemMon)
)

CREATE TABLE BAOCAOTONGKETMON (
	IDBaoCaoTongKetMon char(10) PRIMARY KEY NOT NULL,
	IDBangDiemMon char(10) NOT NULL
	FOREIGN KEY (IDBangDiemMon) REFERENCES BANGDIEMMON(IDBangDiemMon)
)

CREATE TABLE BAOCAOTONGKETHOCKY (
	IDBaoCaoTKHK char(10) PRIMARY KEY NOT NULL,
	HocKy tinyint NOT NULL,
	IDLop char(10) NOT NULL,
	FOREIGN KEY (IDLop) REFERENCES Lop(IDLop)
)

CREATE TABLE THAMSO (
	TuoiToiThieu int,
	TuoiToiDa int,
	SiSoToiDa int,
	SoLuongLop int,
	SoLuongMon int,
	DiemDat decimal(3,2)
)

INSERT INTO LOP (IDLop, TenLop) VALUES ('L01', '10A1');
INSERT INTO LOP (IDLop, TenLop) VALUES ('L02', '10A2');
INSERT INTO LOP (IDLop, TenLop) VALUES ('L03', '10A3');
INSERT INTO LOP (IDLop, TenLop) VALUES ('L04', '10A4');
INSERT INTO LOP (IDLop, TenLop) VALUES ('L05', '11A1');
INSERT INTO LOP (IDLop, TenLop) VALUES ('L06', '11A2');
INSERT INTO LOP (IDLop, TenLop) VALUES ('L07', '11A3');
INSERT INTO LOP (IDLop, TenLop) VALUES ('L08', '12A1');
INSERT INTO LOP (IDLop, TenLop) VALUES ('L09', '12A2');

INSERT INTO MONHOC(IDMonHoc, TenMH) VALUES ('MH01', 'Toán');
INSERT INTO MONHOC(IDMonHoc, TenMH) VALUES ('MH02', 'Vật lý');
INSERT INTO MONHOC(IDMonHoc, TenMH) VALUES ('MH03', 'Hóa học');
INSERT INTO MONHOC(IDMonHoc, TenMH) VALUES ('MH04', 'Sinh học');
INSERT INTO MONHOC(IDMonHoc, TenMH) VALUES ('MH05', 'Lịch sử');
INSERT INTO MONHOC(IDMonHoc, TenMH) VALUES ('MH06', 'Địa lý');
INSERT INTO MONHOC(IDMonHoc, TenMH) VALUES ('MH07', 'Ngữ văn');
INSERT INTO MONHOC(IDMonHoc, TenMH) VALUES ('MH08', 'Đạo đức');
INSERT INTO MONHOC(IDMonHoc, TenMH) VALUES ('MH09', 'Thể dục');

INSERT INTO HOSOHOCSINH VALUES('HS01','Thang','thang','true','2000/07/19','asd');
INSERT INTO HOSOHOCSINH VALUES('HS02','Nam','nam','true','1999/11/24','dsa');
INSERT INTO HOSOHOCSINH VALUES('HS03','Tam','tam','true','1999/10/05','sda');
INSERT INTO HOSOHOCSINH VALUES('HS04','Nhu','nhu','false','2000/04/15','sad');
INSERT INTO HOSOHOCSINH VALUES('HS05','Thanh','thanh','true','2000/11/11','tht');
INSERT INTO HOSOHOCSINH VALUES('HS06','Loc','loc','true','2000/02/02','loc');

INSERT INTO TONGKETLOP(MaHS, IDLop) VALUES ('HS01','L01');
INSERT INTO TONGKETLOP(MaHS, IDLop) VALUES ('HS02','L02');
INSERT INTO TONGKETLOP(MaHS, IDLop) VALUES ('HS03','L02');
INSERT INTO TONGKETLOP(MaHS, IDLop) VALUES ('HS04','L03');
INSERT INTO TONGKETLOP(MaHS, IDLop) VALUES ('HS05','L04');
INSERT INTO TONGKETLOP(MaHS, IDLop) VALUES ('HS06','L01');

DELETE FROM MONHOC WHERE IDMonHoc = 'M01'
DELETE FROM LOP WHERE IDLop = 'L1'